<!DOCTYPE html>
<!--Stephen Rong, Biol 2430: Final Project-->

<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>D3 Page Template</title>
        <script type="text/javascript" src="d3/d3.js"></script>
        <style type="text/css">
            p {
                font-family: verdana;
            }
            div.bar {
                display: inline-block;
                width: 1px;
                height: 75px;
                margin-right: 1px;
                background-color: teal;
            }
        </style>
    </head>
    <body>
        <script type="text/javascript">
            var w = 500
            var h = 500
            var r = 2  // 1.5

            var test1 = "H12_1"
            var test2 = "DDAF_1"
            var test3 = "DDAF_1"

            // Color Mapping
            var colors = {
                "ne": "#D4A2E1",
                "hs": "#ECBB3D",
                "hl": "#C1DD45",
                "ss": "#55E0C6",
                "sl": "#73E162"
            }

            var dataset
            d3.tsv("trainingsetPost.txt", function(error, data) {
                dataset = data
                console.log(dataset)
                var body = d3.select("body")

                // Scatterplot
                var click1 = body.append("p")
                click1.text("Scatterplot")
                var svg = body.append("svg")
                svg.attr("width", w)
                    .attr("height", h)

                var circles = svg.selectAll("circle")
                circles.data(dataset)
                    .enter()
                    .append("circle")
                    .attr("cx", function(d){
                        return Math.floor(d["H1_1"]*1000);
                    })
                    .attr("cy", function(d){
                        return h-Math.floor(d["H2_1"]*4000);
                    })
                    .attr("r", function(d){
                        return r
                    })
                    .attr("opacity", "0.5")
                    .style("fill", function(d){
                        return colors[d["sclass"]]
                    })

                svg.on("click", function(){
                    svg.selectAll("circle")
                        .data(dataset)
                        .transition()
                        .attr("cx", function(d){
                            return Math.floor(d["H1_1"]*1000);
                        })
                        .attr("cy", function(d){
                            return h-Math.floor(d[test3]*500);
                        })
                        .attr("r", function(d){
                            return r
                        })
                        .attr("opacity", "0.5")
                        .style("fill", function(d){
                            return colors[d["sclass"]]
                        })
                })

                // Histogram
                var click2 = body.append("p")
                click2.text("Histogram")
                body.selectAll("div")
                    .data(dataset)
                    .enter()
                    .append("div")
                    .attr("class", "bar")
                    .style("height", function(d){
                        return Math.floor(d[test1]*100)+"px";
                    })
                    .style("background-color", function(d){
                        return colors[d["sclass"]]
                    })

                body.on("click", function(){
                    body.selectAll("div")
                        .data(dataset)
                        .transition()
                        .attr("class", "bar")
                        .style("height", function(d){
                            return Math.floor(d[test2]*75)+"px";
                        })
                        .style("background-color", function(d){
                            return colors[d["sclass"]]
                        })
                })
            })

        </script>
    </body>
</html>